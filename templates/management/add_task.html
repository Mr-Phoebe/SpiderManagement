{% extends "management/base.html" %} {% load staticfiles %} {% block title %}添加任务{% endblock %} {% block content %}
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-md-offset-3 col-sm-10 col-sm-offset-1">
                {% if state == 'success' %}
                    <div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">添加任务成功</h4>
                                </div>
                                <div class="modal-body">
                                    <h4>3秒后跳转到任务列表</h4>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary confirm">确定</button>
                                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script>
                        $('#myModal').modal('show');
                    </script>
                {% endif %}
                <form method="POST" role="form" class="form-horizontal">
                    {% csrf_token %}
                    <h1 class="form-signin-heading text-center">添加任务</h1>
                    <div class="form-group">
                        <label for="id_name" class="col-md-3 control-label">任务名：</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" id="id_name" required name="name" autofocus>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="id_url" class="col-md-3 control-label">任务地址：</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" required name="url" id="id_url">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="id_url" class="col-md-3 control-label">抓取内容：</label>
                        <div class="col-md-9">
                            <input type="text" class="form-control" required name="content" id="id_content">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-4 col-md-offset-4">
                            <button class="btn btn btn-primary btn-block" type="submit">提交</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        $('.confirm').click(function () {
            // hide the modal
            $('#myModal').modal('hide')
            tobj = setTimeout(function () {
                location = '../view_task_list/'
            }, 3000)
        });
    </script>
{% endblock %}
